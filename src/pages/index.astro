---
import { getCollection } from "astro:content";
import Container from "@components/Container.astro";
import PageLayout from "@layouts/PageLayout.astro";
import TimelineItem from "@components/TimelineItem.astro";
import { SITE, HOME, SOCIALS } from "@consts";

const blog = (await getCollection("notes"))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, SITE.NUM_POSTS_ON_HOMEPAGE);
---

<PageLayout title={HOME.TITLE} description={HOME.DESCRIPTION}>
  <Container>
    <section>
      <article class="mb-16">
        <h1 class="animate tech-headline mb-6 text-2xl">
          Bridging psychology and product
        </h1>
        <p class="animate mb-8">
          I'm a user-centered product generalist with a background in
          psychology, building digital public services with and for the justice
          system at the German government's <a
            href="https://digitalservice.bund.de"
            class="underline">DigitalService</a
          >.
        </p>
        <div class="animate flex flex-wrap items-center gap-2">
          <a
            href={`mailto:${SITE.EMAIL}`}
            class="inline-flex items-center gap-2 px-4 py-2 h-[42px] rounded-lg bg-[var(--accent-color)] dark:bg-white text-white dark:text-black hover:text-white dark:hover:text-black hover:bg-[#3a5275] dark:hover:bg-neutral-100 transition-colors no-underline"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="1.5"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path
                d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
              ></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
            <span>Send an email</span>
          </a>
          {
            SOCIALS.map((social) => (
              <a
                href={social.HREF}
                target="_blank"
                rel="noopener noreferrer"
                aria-label={social.NAME}
                class="px-3 py-2 h-[42px] flex items-center rounded-lg border border-black/15 dark:border-white/20 hover:bg-black/5 dark:hover:bg-white/10 transition-colors"
              >
                {social.NAME === "linkedin" && (
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z" />
                    <rect x="2" y="9" width="4" height="12" />
                    <circle cx="4" cy="4" r="2" />
                  </svg>
                )}
                {social.NAME === "github" && (
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="1.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" />
                  </svg>
                )}
                {social.NAME === "bluesky" && (
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="18"
                    height="18"
                    viewBox="-20 -50 608 601"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="40"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  >
                    <path d="M123.121 33.6637C188.241 82.5526 258.281 181.681 284 234.873C309.719 181.681 379.759 82.5526 444.879 33.6637C491.866 -1.61183 568 -28.9064 568 57.9464C568 75.2916 558.055 203.659 552.222 224.501C531.947 296.954 458.067 315.434 392.347 304.249C507.222 323.8 536.444 388.56 473.333 453.32C353.473 576.312 301.061 422.461 287.631 383.039C285.169 375.812 284.017 372.089 284 375.007C283.983 372.089 282.831 375.812 280.369 383.039C266.939 422.461 214.527 576.312 94.6667 453.32C31.5556 388.56 60.7778 323.8 175.653 304.249C109.933 315.434 36.0535 296.954 15.7778 224.501C9.94525 203.659 0 75.2916 0 57.9464C0 -28.9064 76.1345 -1.61183 123.121 33.6637Z" />
                  </svg>
                )}
              </a>
            ))
          }
        </div>
      </article>

      <section class="animate space-y-8">
        <div class="flex flex-wrap gap-y-2 items-center justify-between">
          <h2 class="font-semibold text-lg">Recent notes & highlights</h2>
        </div>
        <ul class="relative border-l border-black/15 dark:border-white/20 ml-2">
          {
            blog.map((post) => (
              <li class="ml-4">
                <TimelineItem entry={post} />
              </li>
            ))
          }
        </ul>
        <a
          href="/notes"
          class="group inline-flex items-center gap-1 text-base text-black/60 dark:text-white/60 hover:text-black dark:hover:text-white transition-colors duration-300 ease-in-out"
        >
          See all notes
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="14"
            height="14"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="group-hover:translate-x-0.5 transition-transform duration-300 ease-in-out"
          >
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </a>
      </section>
    </section>
  </Container>
</PageLayout>
